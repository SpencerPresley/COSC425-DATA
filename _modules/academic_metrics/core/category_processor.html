<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>academic_metrics.core.category_processor &#8212; Academic Metrics 0.1.0-beta documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic_mod.css?v=9b2032db" />
    <script src="../../../_static/documentation_options.js?v=c903bf51"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <script src="../../../_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../../../index.html" title="Go to homepage">Academic Metrics 0.1.0-beta documentation</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../../../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../abstract_classifier.html">Abstract Classifier Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../category_processor.html">Category Processor Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faculty_set_postprocessor.html">Faculty Set Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../config.html">Global Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chain_builder.html">Chain Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ai_prompts.html">ai_prompts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_collection.html">data_collection package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dataclass_models.html">dataclass_models package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../DB.html">DB package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../enums.html">enums package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../factories.html">factories package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../orchestrators.html">orchestrators package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../other.html">other package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../runners.html">runners package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../strategies.html">strategies package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../utils.html">utils package</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for academic_metrics.core.category_processor</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TYPE_CHECKING</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">quote</span>

<span class="kn">from</span> <span class="nn">academic_metrics.configs</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">configure_logging</span><span class="p">,</span>
    <span class="n">LOG_TO_CONSOLE</span><span class="p">,</span>
    <span class="n">DEBUG</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">academic_metrics.enums</span> <span class="kn">import</span> <span class="n">AttributeTypes</span><span class="p">,</span> <span class="n">DataClassTypes</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.dataclass_models</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">CategoryInfo</span><span class="p">,</span>
        <span class="n">FacultyStats</span><span class="p">,</span>
        <span class="n">GlobalFacultyStats</span><span class="p">,</span>
        <span class="n">CrossrefArticleStats</span><span class="p">,</span>
        <span class="n">CrossrefArticleDetails</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.utils</span> <span class="kn">import</span> <span class="n">Utilities</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.utils</span> <span class="kn">import</span> <span class="n">WarningManager</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.factories</span> <span class="kn">import</span> <span class="n">DataClassFactory</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.utils.taxonomy_util</span> <span class="kn">import</span> <span class="n">Taxonomy</span>


<div class="viewcode-block" id="CategoryProcessor">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor">[docs]</a>
<span class="k">class</span> <span class="nc">CategoryProcessor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Processes and organizes academic publication data by categories.</span>

<span class="sd">    This class handles the processing of classified publication data, organizing it into</span>
<span class="sd">    categories and generating various statistics. It manages faculty affiliations,</span>
<span class="sd">    article details, and category relationships.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        utils (Utilities): Utility functions for data processing.</span>
<span class="sd">        warning_manager (WarningManager): System for handling and logging warnings.</span>
<span class="sd">        dataclass_factory (DataClassFactory): Factory for creating data model instances.</span>
<span class="sd">        taxonomy_util (Taxonomy): Utility for managing publication taxonomy.</span>
<span class="sd">        category_data (Dict[str, CategoryInfo]): Mapping of categories to their information.</span>
<span class="sd">        faculty_stats (Dict[str, FacultyStats]): Faculty statistics by category.</span>
<span class="sd">        global_faculty_stats (Dict[str, GlobalFacultyStats]): Global faculty statistics.</span>
<span class="sd">        category_article_stats (Dict[str, CrossrefArticleStats]): Article statistics by category.</span>
<span class="sd">        articles (List[CrossrefArticleDetails]): List of processed article details.</span>
<span class="sd">        logger (logging.Logger): Logger instance for this class.</span>
<span class="sd">        log_file_path (str): Path to the log file.</span>

<span class="sd">    Methods:</span>
<span class="sd">        Public Methods:</span>
<span class="sd">            process_data_list: Process a list of publication data items.</span>
<span class="sd">            get_category_data: Get processed category data.</span>
<span class="sd">            get_category_article_stats: Get article statistics by category.</span>
<span class="sd">            get_articles: Get list of processed articles.</span>
<span class="sd">            get_faculty_stats: Get faculty statistics by category.</span>
<span class="sd">            get_global_faculty_stats: Get global faculty statistics.</span>

<span class="sd">        Private Methods:</span>
<span class="sd">            call_get_attributes: Extract attributes from raw data.</span>
<span class="sd">            update_category_stats: Update statistics for a category.</span>
<span class="sd">            update_faculty_stats: Update faculty statistics.</span>
<span class="sd">            update_global_faculty_stats: Update global faculty statistics.</span>
<span class="sd">            update_category_article_stats: Update article statistics by category.</span>
<span class="sd">            create_article_object: Create a new article object.</span>
<span class="sd">            clean_faculty_affiliations: Clean faculty affiliation data.</span>
<span class="sd">            clean_faculty_members: Clean faculty member data.</span>
<span class="sd">            initialize_categories: Initialize category data structures.</span>
<span class="sd">            _collect_all_affiliations: Collect all faculty affiliations.</span>
<span class="sd">            _generate_url: Generate URL from string.</span>
<span class="sd">            _generate_normal_id: Generate normalized ID from strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="CategoryProcessor.__init__">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">utils</span><span class="p">:</span> <span class="n">Utilities</span><span class="p">,</span>
        <span class="n">dataclass_factory</span><span class="p">:</span> <span class="n">DataClassFactory</span><span class="p">,</span>
        <span class="n">warning_manager</span><span class="p">:</span> <span class="n">WarningManager</span><span class="p">,</span>
        <span class="n">taxonomy_util</span><span class="p">:</span> <span class="n">Taxonomy</span><span class="p">,</span>
        <span class="n">log_to_console</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">LOG_TO_CONSOLE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the CategoryProcessor with required dependencies.</span>

<span class="sd">        Sets up logging configuration and initializes all required components for</span>
<span class="sd">        processing publication data, including utilities, factories, and data structures</span>
<span class="sd">        for storing category, faculty, and article information.</span>

<span class="sd">        Args:</span>
<span class="sd">            utils (Utilities): Utility functions for data processing.</span>
<span class="sd">            dataclass_factory (DataClassFactory): Factory for creating data model instances.</span>
<span class="sd">            warning_manager (WarningManager): System for handling and logging warnings.</span>
<span class="sd">            taxonomy_util (Taxonomy): Utility for managing publication taxonomy.</span>
<span class="sd">            log_to_console (bool, optional): Whether to log output to console. Defaults to True.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If required dependencies are not properly initialized.</span>
<span class="sd">            IOError: If log file cannot be created or accessed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">configure_logging</span><span class="p">(</span>
            <span class="n">module_name</span><span class="o">=</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="n">log_file_name</span><span class="o">=</span><span class="s2">&quot;category_processor&quot;</span><span class="p">,</span>
            <span class="n">log_level</span><span class="o">=</span><span class="n">DEBUG</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="p">:</span> <span class="n">Utilities</span> <span class="o">=</span> <span class="n">utils</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warning_manager</span><span class="p">:</span> <span class="n">WarningManager</span> <span class="o">=</span> <span class="n">warning_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataclass_factory</span><span class="p">:</span> <span class="n">DataClassFactory</span> <span class="o">=</span> <span class="n">dataclass_factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="p">:</span> <span class="n">Taxonomy</span> <span class="o">=</span> <span class="n">taxonomy_util</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">category_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CategoryInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># influential stats dictionaries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">faculty_stats</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FacultyStats</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_faculty_stats</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GlobalFacultyStats</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Seperately tracks article stats for each category the article is in</span>
        <span class="c1"># This gives the article stats for each article under a given category</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">category_article_stats</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CrossrefArticleStats</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># This creates a CrossrefArticleDetails object for each article</span>
        <span class="c1"># This gives an object per article so that we can have ground truth articles</span>
        <span class="c1"># This is what allows for category stats to just have a list of DOIs as those can</span>
        <span class="c1"># be used to look up the article details object for that doi from this list of CrossrefArticleDetails</span>
        <span class="c1"># objects.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">articles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CrossrefArticleDetails</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="CategoryProcessor.process_data_list">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.process_data_list">[docs]</a>
    <span class="k">def</span> <span class="nf">process_data_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a list of publication data items.</span>

<span class="sd">        Takes raw publication data and processes each item through several stages:</span>
<span class="sd">        1. Extracts base attributes</span>
<span class="sd">        2. Initializes category information</span>
<span class="sd">        3. Generates URL maps for categories</span>
<span class="sd">        4. Cleans faculty and affiliation data</span>
<span class="sd">        5. Updates various statistics (category, faculty, article)</span>
<span class="sd">        6. Creates article objects</span>

<span class="sd">        Args:</span>
<span class="sd">            data (List[Dict]): List of raw publication data dictionaries to process.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If required attributes are missing from data.</span>
<span class="sd">            Exception: If category information cannot be initialized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting to process data list...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing item: </span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Get base attributes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Calling get_attributes...&quot;</span><span class="p">)</span>
            <span class="n">raw_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_get_attributes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw attributes: </span><span class="si">{</span><span class="n">raw_attributes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Get category information</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting category initialization...&quot;</span><span class="p">)</span>
            <span class="n">category_levels</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize_categories</span><span class="p">(</span>
                <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Category levels:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">category_levels</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Completed category initialization.&quot;</span><span class="p">)</span>

            <span class="c1"># Fetch out seperate category levels</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Fetching category levels...&quot;</span><span class="p">)</span>
            <span class="n">top_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;top_level_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top categories: </span><span class="si">{</span><span class="n">top_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">mid_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mid categories: </span><span class="si">{</span><span class="n">mid_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">low_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Low categories: </span><span class="si">{</span><span class="n">low_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">all_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;all_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All categories: </span><span class="si">{</span><span class="n">all_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed category level fetch.&quot;</span><span class="p">)</span>

            <span class="c1"># Create URL maps for each category level</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting URL map creation...&quot;</span><span class="p">)</span>
            <span class="n">top_level_url_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">mid_level_url_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">low_level_url_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed URL map creation.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Populating URL maps...&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">all_categories</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing category: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">low_categories</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in low categories.&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting mid category for low category...&quot;</span><span class="p">)</span>
                    <span class="n">mid_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_mid_cat_for_low_cat</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mid category: </span><span class="si">{</span><span class="n">mid_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting top category for mid category...&quot;</span><span class="p">)</span>
                    <span class="n">top_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_top_cat_for_mid_cat</span><span class="p">(</span><span class="n">mid_cat</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top category: </span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URL for low category...&quot;</span><span class="p">)</span>
                    <span class="n">low_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mid_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Low level URL: </span><span class="si">{</span><span class="n">low_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">mid_categories</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in mid categories.&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting top category for mid category...&quot;</span><span class="p">)</span>
                    <span class="n">top_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_top_cat_for_mid_cat</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top category: </span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URL for mid category...&quot;</span><span class="p">)</span>
                    <span class="n">mid_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mid level URL: </span><span class="si">{</span><span class="n">mid_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in top categories.&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URL for top category...&quot;</span><span class="p">)</span>
                    <span class="n">top_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span>
                        <span class="n">category</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top level URL: </span><span class="si">{</span><span class="n">top_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Top level URL map:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">top_level_url_map</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Mid level URL map:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">mid_level_url_map</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Low level URL map:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">low_level_url_map</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed URL map population.&quot;</span><span class="p">)</span>

            <span class="c1"># Clean special fields</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning faculty members...&quot;</span><span class="p">)</span>
            <span class="n">faculty_members</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_faculty_members</span><span class="p">(</span>
                <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cleaned faculty members:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">faculty_members</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning faculty affiliations...&quot;</span><span class="p">)</span>
            <span class="n">faculty_affiliations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_faculty_affiliations</span><span class="p">(</span>
                    <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cleaned faculty affiliations:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">faculty_affiliations</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Collecting all affiliations...&quot;</span><span class="p">)</span>
            <span class="n">all_affiliations</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_all_affiliations</span><span class="p">(</span>
                <span class="n">faculty_affiliations</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Collected all affiliations:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">all_affiliations</span><span class="p">),</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Unpack everything into kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Unpacking everything into kwargs...&quot;</span><span class="p">)</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="c1"># Basic article info</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;doi&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tc_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;abstract&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;license_url&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;license_url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;date_published_print&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;date_published_print&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;date_published_online&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s2">&quot;date_published_online&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
                <span class="p">),</span>
                <span class="s2">&quot;journal&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;journal&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;download_url&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;download_url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;themes&quot;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="c1"># Faculty and affiliations</span>
                <span class="s2">&quot;faculty_members&quot;</span><span class="p">:</span> <span class="n">faculty_members</span><span class="p">,</span>
                <span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">:</span> <span class="n">faculty_affiliations</span><span class="p">,</span>
                <span class="s2">&quot;all_affiliations&quot;</span><span class="p">:</span> <span class="n">all_affiliations</span><span class="p">,</span>
                <span class="c1"># Category information</span>
                <span class="s2">&quot;all_categories&quot;</span><span class="p">:</span> <span class="n">all_categories</span><span class="p">,</span>
                <span class="s2">&quot;top_level_categories&quot;</span><span class="p">:</span> <span class="n">top_categories</span><span class="p">,</span>
                <span class="s2">&quot;mid_level_categories&quot;</span><span class="p">:</span> <span class="n">mid_categories</span><span class="p">,</span>
                <span class="s2">&quot;low_level_categories&quot;</span><span class="p">:</span> <span class="n">low_categories</span><span class="p">,</span>
                <span class="s2">&quot;url_maps&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="n">top_level_url_map</span><span class="p">,</span>
                    <span class="s2">&quot;mid&quot;</span><span class="p">:</span> <span class="n">mid_level_url_map</span><span class="p">,</span>
                    <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="n">low_level_url_map</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed unpacking everything into kwargs.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating category stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_category_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating category stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating faculty stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_faculty_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating faculty stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating global faculty stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_global_faculty_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating global faculty stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating category article stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_category_article_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating category article stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating article object...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_article_object</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed creating article object.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor._test_category_processor">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor._test_category_processor">[docs]</a>
    <span class="k">def</span> <span class="nf">_test_category_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Get base attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Calling get_attributes...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw attributes: </span><span class="si">{</span><span class="n">raw_attributes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Get category information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting category initialization...&quot;</span><span class="p">)</span>
        <span class="n">category_levels</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize_categories</span><span class="p">(</span>
            <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Category levels:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">category_levels</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Completed category initialization.&quot;</span><span class="p">)</span>

        <span class="c1"># Fetch out seperate category levels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Fetching category levels...&quot;</span><span class="p">)</span>
        <span class="n">top_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;top_level_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top categories: </span><span class="si">{</span><span class="n">top_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">mid_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mid categories: </span><span class="si">{</span><span class="n">mid_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">low_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Low categories: </span><span class="si">{</span><span class="n">low_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;all_categories&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All categories: </span><span class="si">{</span><span class="n">all_categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed category level fetch.&quot;</span><span class="p">)</span>

        <span class="c1"># Create URL maps for each category level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting URL map creation...&quot;</span><span class="p">)</span>
        <span class="n">top_level_url_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">mid_level_url_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">low_level_url_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed URL map creation.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Populating URL maps...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">all_categories</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing category: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">low_categories</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in low categories.&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting mid category for low category...&quot;</span><span class="p">)</span>
                <span class="n">mid_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_mid_cat_for_low_cat</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mid category: </span><span class="si">{</span><span class="n">mid_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting top category for mid category...&quot;</span><span class="p">)</span>
                <span class="n">top_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_top_cat_for_mid_cat</span><span class="p">(</span><span class="n">mid_cat</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top category: </span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URL for low category...&quot;</span><span class="p">)</span>
                <span class="n">low_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mid_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Low level URL: </span><span class="si">{</span><span class="n">low_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">mid_categories</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in mid categories.&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting top category for mid category...&quot;</span><span class="p">)</span>
                <span class="n">top_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_top_cat_for_mid_cat</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top category: </span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URL for mid category...&quot;</span><span class="p">)</span>
                <span class="n">mid_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mid level URL: </span><span class="si">{</span><span class="n">mid_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in top categories.&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URL for top category...&quot;</span><span class="p">)</span>
                <span class="n">top_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top level URL: </span><span class="si">{</span><span class="n">top_level_url_map</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Top level URL map:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">top_level_url_map</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Mid level URL map:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">mid_level_url_map</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Low level URL map:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">low_level_url_map</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed URL map population.&quot;</span><span class="p">)</span>

            <span class="c1"># Clean special fields</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning faculty members...&quot;</span><span class="p">)</span>
            <span class="n">faculty_members</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_faculty_members</span><span class="p">(</span>
                <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cleaned faculty members:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">faculty_members</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning faculty affiliations...&quot;</span><span class="p">)</span>
            <span class="n">faculty_affiliations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_faculty_affiliations</span><span class="p">(</span>
                    <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cleaned faculty affiliations:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">faculty_affiliations</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Collecting all affiliations...&quot;</span><span class="p">)</span>
            <span class="n">all_affiliations</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_all_affiliations</span><span class="p">(</span>
                <span class="n">faculty_affiliations</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Collected all affiliations:</span><span class="se">\n</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">all_affiliations</span><span class="p">),</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Unpack everything into kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Unpacking everything into kwargs...&quot;</span><span class="p">)</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="c1"># Basic article info</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;doi&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tc_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;abstract&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;license_url&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;license_url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;date_published_print&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;date_published_print&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;date_published_online&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s2">&quot;date_published_online&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
                <span class="p">),</span>
                <span class="s2">&quot;journal&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;journal&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;download_url&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;download_url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">raw_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;themes&quot;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="c1"># Faculty and affiliations</span>
                <span class="s2">&quot;faculty_members&quot;</span><span class="p">:</span> <span class="n">faculty_members</span><span class="p">,</span>
                <span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">:</span> <span class="n">faculty_affiliations</span><span class="p">,</span>
                <span class="s2">&quot;all_affiliations&quot;</span><span class="p">:</span> <span class="n">all_affiliations</span><span class="p">,</span>
                <span class="c1"># Category information</span>
                <span class="s2">&quot;all_categories&quot;</span><span class="p">:</span> <span class="n">all_categories</span><span class="p">,</span>
                <span class="s2">&quot;top_level_categories&quot;</span><span class="p">:</span> <span class="n">top_categories</span><span class="p">,</span>
                <span class="s2">&quot;mid_level_categories&quot;</span><span class="p">:</span> <span class="n">mid_categories</span><span class="p">,</span>
                <span class="s2">&quot;low_level_categories&quot;</span><span class="p">:</span> <span class="n">low_categories</span><span class="p">,</span>
                <span class="s2">&quot;url_maps&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="n">top_level_url_map</span><span class="p">,</span>
                    <span class="s2">&quot;mid&quot;</span><span class="p">:</span> <span class="n">mid_level_url_map</span><span class="p">,</span>
                    <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="n">low_level_url_map</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed unpacking everything into kwargs.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating category stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_category_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating category stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating faculty stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_faculty_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating faculty stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating global faculty stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_global_faculty_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating global faculty stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating category article stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_category_article_stats</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating category article stats.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating article object...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_article_object</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed creating article object.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor.call_get_attributes">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.call_get_attributes">[docs]</a>
    <span class="k">def</span> <span class="nf">call_get_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract and process attributes from raw publication data.</span>

<span class="sd">        Extracts various attributes including categories, authors, departments, titles,</span>
<span class="sd">        citations, abstracts, licenses, publication dates, journal info, URLs, DOIs,</span>
<span class="sd">        and themes from the raw data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (Dict[str, Any]): Raw publication data dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: Dictionary containing extracted and processed attributes:</span>
<span class="sd">                - categories: List of publication categories</span>
<span class="sd">                - faculty_members: List of faculty authors</span>
<span class="sd">                - faculty_affiliations: Dictionary mapping faculty to their departments</span>
<span class="sd">                - title: Publication title</span>
<span class="sd">                - tc_count: Citation count</span>
<span class="sd">                - abstract: Publication abstract</span>
<span class="sd">                - license_url: License URL</span>
<span class="sd">                - date_published_print: Print publication date</span>
<span class="sd">                - date_published_online: Online publication date</span>
<span class="sd">                - journal: Journal name</span>
<span class="sd">                - download_url: Download URL</span>
<span class="sd">                - doi: Digital Object Identifier</span>
<span class="sd">                - themes: List of publication themes</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If no category is found in the data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Calling get_attributes...&quot;</span><span class="p">)</span>

        <span class="n">attribute_results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="p">[</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_CATEGORIES</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_AUTHORS</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_DEPARTMENTS</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_TITLE</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_CITATION_COUNT</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_ABSTRACT</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_LICENSE_URL</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_PUBLISHED_PRINT</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_PUBLISHED_ONLINE</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_JOURNAL</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_URL</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_DOI</span><span class="p">,</span>
                    <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_THEMES</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed calling get_attributes.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if categories exist...&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_CATEGORIES</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attribute_results</span><span class="p">[</span>
                <span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_CATEGORIES</span>
            <span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got categories: </span><span class="si">{</span><span class="n">categories</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No category found for data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if faculty members exist...&quot;</span><span class="p">)</span>
        <span class="n">faculty_members</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_AUTHORS</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_AUTHORS</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got faculty members: </span><span class="si">{</span><span class="n">faculty_members</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if faculty affiliations exist...&quot;</span><span class="p">)</span>
        <span class="n">faculty_affiliations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_DEPARTMENTS</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_DEPARTMENTS</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got faculty affiliations: </span><span class="si">{</span><span class="n">faculty_affiliations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if title exists...&quot;</span><span class="p">)</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_TITLE</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_TITLE</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got title: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if citation count exists...&quot;</span><span class="p">)</span>
        <span class="n">tc_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_CITATION_COUNT</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_CITATION_COUNT</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got citation count: </span><span class="si">{</span><span class="n">tc_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if abstract exists...&quot;</span><span class="p">)</span>
        <span class="n">abstract</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_ABSTRACT</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_ABSTRACT</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got abstract: </span><span class="si">{</span><span class="n">abstract</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if license URL exists...&quot;</span><span class="p">)</span>
        <span class="n">license_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_LICENSE_URL</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_LICENSE_URL</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got license URL: </span><span class="si">{</span><span class="n">license_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if print publication date exists...&quot;</span><span class="p">)</span>
        <span class="n">date_published_print</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_PUBLISHED_PRINT</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_PUBLISHED_PRINT</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got print publication date: </span><span class="si">{</span><span class="n">date_published_print</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if online publication date exists...&quot;</span><span class="p">)</span>
        <span class="n">date_published_online</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_PUBLISHED_ONLINE</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_PUBLISHED_ONLINE</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got online publication date: </span><span class="si">{</span><span class="n">date_published_online</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if journal exists...&quot;</span><span class="p">)</span>
        <span class="n">journal</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_JOURNAL</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_JOURNAL</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got journal: </span><span class="si">{</span><span class="n">journal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if download URL exists...&quot;</span><span class="p">)</span>
        <span class="n">download_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_URL</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_URL</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got download URL: </span><span class="si">{</span><span class="n">download_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if DOI exists...&quot;</span><span class="p">)</span>
        <span class="n">doi</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_DOI</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_DOI</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got DOI: </span><span class="si">{</span><span class="n">doi</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if themes exist...&quot;</span><span class="p">)</span>
        <span class="n">themes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_THEMES</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribute_results</span><span class="p">[</span><span class="n">AttributeTypes</span><span class="o">.</span><span class="n">CROSSREF_THEMES</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got themes: </span><span class="si">{</span><span class="n">themes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed calling get_attributes.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning attribute results...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
            <span class="s2">&quot;faculty_members&quot;</span><span class="p">:</span> <span class="n">faculty_members</span><span class="p">,</span>
            <span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">:</span> <span class="n">faculty_affiliations</span><span class="p">,</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
            <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="n">tc_count</span><span class="p">,</span>
            <span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="n">abstract</span><span class="p">,</span>
            <span class="s2">&quot;license_url&quot;</span><span class="p">:</span> <span class="n">license_url</span><span class="p">,</span>
            <span class="s2">&quot;date_published_print&quot;</span><span class="p">:</span> <span class="n">date_published_print</span><span class="p">,</span>
            <span class="s2">&quot;date_published_online&quot;</span><span class="p">:</span> <span class="n">date_published_online</span><span class="p">,</span>
            <span class="s2">&quot;journal&quot;</span><span class="p">:</span> <span class="n">journal</span><span class="p">,</span>
            <span class="s2">&quot;download_url&quot;</span><span class="p">:</span> <span class="n">download_url</span><span class="p">,</span>
            <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="n">doi</span><span class="p">,</span>
            <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">themes</span><span class="p">,</span>
        <span class="p">}</span></div>


<div class="viewcode-block" id="CategoryProcessor.update_category_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.update_category_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">update_category_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update statistics for each category based on processed article data.</span>

<span class="sd">        Updates category information including faculty members, departments, titles,</span>
<span class="sd">        citation counts, DOIs, and themes. Also calculates derived statistics like</span>
<span class="sd">        faculty count, department count, article count, and citation averages.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Keyword arguments containing article data:</span>
<span class="sd">                - title (str): Article title</span>
<span class="sd">                - doi (str): Digital Object Identifier</span>
<span class="sd">                - tc_count (int): Citation count</span>
<span class="sd">                - faculty_members (List[str]): List of faculty authors</span>
<span class="sd">                - all_affiliations (Set[str]): Set of department affiliations</span>
<span class="sd">                - themes (List[str]): List of article themes</span>
<span class="sd">                - all_categories (List[str]): List of all categories</span>
<span class="sd">                url_maps (Dict[str, Dict[str, str]]): Category URL mappings</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If required kwargs are missing.</span>
<span class="sd">            ValueError: If category information cannot be updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating category stats...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_categories&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating category stats for category: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting out category for URL via URL map...&quot;</span><span class="p">)</span>
            <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;low&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting category info...&quot;</span><span class="p">)</span>
            <span class="n">category_info</span><span class="p">:</span> <span class="n">CategoryInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_data</span><span class="p">[</span><span class="n">category</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved object type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">category_info</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting params for category info...&quot;</span><span class="p">)</span>
            <span class="n">category_info</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                    <span class="s2">&quot;faculty&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;departments&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_affiliations&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;titles&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="n">category_info</span><span class="o">.</span><span class="n">tc_count</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;doi_list&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;themes&quot;</span><span class="p">],</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed setting params for category info.&quot;</span><span class="p">)</span>

            <span class="c1"># Update counts based on set lengths after deduplication by the set_params() method</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Updating counts based on set lengths after deduplication...&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Faculty count: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">category_info</span><span class="o">.</span><span class="n">faculty</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Department count: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">category_info</span><span class="o">.</span><span class="n">departments</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Article count: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">category_info</span><span class="o">.</span><span class="n">titles</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Citation average: </span><span class="si">{</span><span class="n">category_info</span><span class="o">.</span><span class="n">citation_average</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">category_info</span><span class="o">.</span><span class="n">faculty_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">category_info</span><span class="o">.</span><span class="n">faculty</span><span class="p">)</span>
            <span class="n">category_info</span><span class="o">.</span><span class="n">department_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">category_info</span><span class="o">.</span><span class="n">departments</span><span class="p">)</span>
            <span class="n">category_info</span><span class="o">.</span><span class="n">article_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">category_info</span><span class="o">.</span><span class="n">titles</span><span class="p">)</span>
            <span class="n">category_info</span><span class="o">.</span><span class="n">citation_average</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">category_info</span><span class="o">.</span><span class="n">tc_count</span> <span class="o">/</span> <span class="n">category_info</span><span class="o">.</span><span class="n">article_count</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updated counts based on set lengths after deduplication.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated faculty count: </span><span class="si">{</span><span class="n">category_info</span><span class="o">.</span><span class="n">faculty_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Updated department count: </span><span class="si">{</span><span class="n">category_info</span><span class="o">.</span><span class="n">department_count</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated article count: </span><span class="si">{</span><span class="n">category_info</span><span class="o">.</span><span class="n">article_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Updated citation average: </span><span class="si">{</span><span class="n">category_info</span><span class="o">.</span><span class="n">citation_average</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating category stats.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor.update_faculty_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.update_faculty_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">update_faculty_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update faculty statistics for each category.</span>

<span class="sd">        Updates faculty member information including department affiliations,</span>
<span class="sd">        publication titles, DOIs, citation counts, and article counts. Creates</span>
<span class="sd">        or updates faculty statistics entries for each category.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Keyword arguments containing faculty and article data:</span>
<span class="sd">                - faculty_members (List[str]): List of faculty authors</span>
<span class="sd">                - faculty_affiliations (Dict[str, List[str]]): Faculty department mappings</span>
<span class="sd">                - title (str): Article title</span>
<span class="sd">                - doi (str): Digital Object Identifier</span>
<span class="sd">                - tc_count (int): Citation count</span>
<span class="sd">                - all_categories (List[str]): List of all categories</span>
<span class="sd">                - url_maps (Dict[str, Dict[str, str]]): Category URL mappings</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If required kwargs are missing.</span>
<span class="sd">            ValueError: If faculty statistics cannot be updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating faculty stats...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_categories&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating faculty stats for category: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Checking if faculty stats for category exists...&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">faculty_stats</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Faculty stats for category does not exist, creating new...&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">faculty_stats</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataclass_factory</span><span class="o">.</span><span class="n">get_dataclass</span><span class="p">(</span>
                    <span class="n">DataClassTypes</span><span class="o">.</span><span class="n">FACULTY_STATS</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created new faculty stats for category.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting URL for category via URL map...&quot;</span><span class="p">)</span>
            <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;low&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating faculty stats for each faculty member...&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">faculty_member</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Updating faculty stats for faculty member: </span><span class="si">{</span><span class="n">faculty_member</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Generating normal ID for faculty member and category...&quot;</span>
                <span class="p">)</span>
                <span class="n">faculty_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_normal_id</span><span class="p">(</span>
                        <span class="n">strings</span><span class="o">=</span><span class="p">[</span><span class="n">faculty_member</span><span class="p">,</span> <span class="n">category</span><span class="p">],</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">faculty_member</span><span class="p">,</span>
                    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span>
                    <span class="s2">&quot;category_url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                    <span class="s2">&quot;department_affiliations&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">faculty_member</span><span class="p">,</span> <span class="p">[]</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;titles&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;dois&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;total_citations&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;article_count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;doi_citation_map&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">]:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">]},</span>
                <span class="p">}</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting params for faculty stats...&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">faculty_stats</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="o">.</span><span class="n">set_params</span><span class="p">({</span><span class="n">faculty_member</span><span class="p">:</span> <span class="n">faculty_data</span><span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed setting params for faculty stats.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating faculty stats.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor.update_global_faculty_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.update_global_faculty_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">update_global_faculty_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update global statistics for each faculty member.</span>

<span class="sd">        Creates or updates global faculty statistics including total citations,</span>
<span class="sd">        article counts, department affiliations, DOIs, titles, categories,</span>
<span class="sd">        and category URLs across all publication categories.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Keyword arguments containing faculty and article data:</span>
<span class="sd">                - faculty_members (List[str]): List of faculty authors</span>
<span class="sd">                - faculty_affiliations (Dict[str, List[str]]): Faculty department mappings</span>
<span class="sd">                - title (str): Article title</span>
<span class="sd">                - doi (str): Digital Object Identifier</span>
<span class="sd">                - tc_count (int): Citation count</span>
<span class="sd">                - all_categories (List[str]): List of all categories</span>
<span class="sd">                - top_level_categories (List[str]): Top-level categories</span>
<span class="sd">                - mid_level_categories (List[str]): Mid-level categories</span>
<span class="sd">                - low_level_categories (List[str]): Low-level categories</span>
<span class="sd">                - url_maps (Dict[str, Dict[str, str]]): Category URL mappings</span>
<span class="sd">                - themes (List[str]): Article themes</span>
<span class="sd">                - journal (str): Journal name</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If required kwargs are missing.</span>
<span class="sd">            ValueError: If global faculty statistics cannot be updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating global faculty stats...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">faculty_member</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Updating global faculty stats for faculty member: </span><span class="si">{</span><span class="n">faculty_member</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Checking if global faculty stats for faculty member exists...&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">faculty_member</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_faculty_stats</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Global faculty stats for faculty member does not exist, creating new...&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">global_faculty_stats</span><span class="p">[</span><span class="n">faculty_member</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dataclass_factory</span><span class="o">.</span><span class="n">get_dataclass</span><span class="p">(</span>
                        <span class="n">DataClassTypes</span><span class="o">.</span><span class="n">GLOBAL_FACULTY_STATS</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">faculty_member</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created new global faculty stats for faculty member.&quot;</span><span class="p">)</span>

            <span class="c1"># Get all URLs from maps</span>
            <span class="c1"># This logic even confused me so here&#39;s a not of why they get everything</span>
            <span class="c1"># This is global faculty stats, so the goal is after processing all papers</span>
            <span class="c1"># We can see the faculty members stats across papers without having to sum up all the individual records provided by the standard faculty stats which only look an individual category stat totals</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting all URLs from maps...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting top category URLs...&quot;</span><span class="p">)</span>
            <span class="n">top_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;top_level_categories&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got top category URLs: </span><span class="si">{</span><span class="n">top_cat_urls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting mid category URLs...&quot;</span><span class="p">)</span>
            <span class="n">mid_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got mid category URLs: </span><span class="si">{</span><span class="n">mid_cat_urls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting low category URLs...&quot;</span><span class="p">)</span>
            <span class="n">low_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;low&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;low&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got low category URLs: </span><span class="si">{</span><span class="n">low_cat_urls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Combining all category URLs...&quot;</span><span class="p">)</span>
            <span class="n">all_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_cat_urls</span> <span class="o">+</span> <span class="n">mid_cat_urls</span> <span class="o">+</span> <span class="n">low_cat_urls</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Combined all category URLs: </span><span class="si">{</span><span class="n">all_cat_urls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting global faculty stats for faculty member...&quot;</span><span class="p">)</span>
            <span class="n">global_stats</span><span class="p">:</span> <span class="n">GlobalFacultyStats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_faculty_stats</span><span class="p">[</span><span class="n">faculty_member</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting params for global faculty stats...&quot;</span><span class="p">)</span>
            <span class="n">global_stats</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_normal_id</span><span class="p">(</span>
                        <span class="n">strings</span><span class="o">=</span><span class="p">[</span><span class="n">faculty_member</span><span class="p">],</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;total_citations&quot;</span><span class="p">:</span> <span class="n">global_stats</span><span class="o">.</span><span class="n">total_citations</span>
                    <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;article_count&quot;</span><span class="p">:</span> <span class="n">global_stats</span><span class="o">.</span><span class="n">article_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;department_affiliations&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">faculty_member</span><span class="p">,</span> <span class="p">[]</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;dois&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;titles&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_categories&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;category_urls&quot;</span><span class="p">:</span> <span class="n">all_cat_urls</span><span class="p">,</span>
                    <span class="s2">&quot;top_level_categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;top_level_categories&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;mid_level_categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;low_level_categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;top_category_urls&quot;</span><span class="p">:</span> <span class="n">top_cat_urls</span><span class="p">,</span>
                    <span class="s2">&quot;mid_category_urls&quot;</span><span class="p">:</span> <span class="n">mid_cat_urls</span><span class="p">,</span>
                    <span class="s2">&quot;low_category_urls&quot;</span><span class="p">:</span> <span class="n">low_cat_urls</span><span class="p">,</span>
                    <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;themes&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;journals&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;journal&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;citation_map&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">]:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">]},</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed setting params for global faculty stats.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating global faculty stats.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor.update_category_article_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.update_category_article_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">update_category_article_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update article statistics for each category.</span>

<span class="sd">        Creates or updates article statistics including titles, citations, faculty members,  affiliations, abstracts, licenses, publication dates, and URLs. Organizes articles by their category levels (top, mid, low).</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Keyword arguments containing article data:</span>
<span class="sd">                - title (str): Article title</span>
<span class="sd">                - doi (str): Digital Object Identifier</span>
<span class="sd">                - tc_count (int): Citation count</span>
<span class="sd">                - faculty_members (List[str]): List of faculty authors</span>
<span class="sd">                - faculty_affiliations (Dict[str, List[str]]): Faculty department mappings</span>
<span class="sd">                - abstract (str): Article abstract</span>
<span class="sd">                - license_url (str): License URL</span>
<span class="sd">                - date_published_print (str): Print publication date</span>
<span class="sd">                - date_published_online (str): Online publication date</span>
<span class="sd">                - journal (str): Journal name</span>
<span class="sd">                - download_url (str): Download URL</span>
<span class="sd">                - themes (List[str]): Article themes</span>
<span class="sd">                - all_categories (List[str]): List of all categories</span>
<span class="sd">                - low_level_categories (List[str]): Low-level categories</span>
<span class="sd">                - mid_level_categories (List[str]): Mid-level categories</span>
<span class="sd">                - url_maps (Dict[str, Dict[str, str]]): Category URL mappings</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If required kwargs are missing.</span>
<span class="sd">            ValueError: If article statistics cannot be updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating category article stats...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_categories&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Updating category article stats for category: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Checking if category article stats for category exists...&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_article_stats</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Category article stats for category does not exist, creating new...&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">category_article_stats</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dataclass_factory</span><span class="o">.</span><span class="n">get_dataclass</span><span class="p">(</span>
                        <span class="n">DataClassTypes</span><span class="o">.</span><span class="n">CROSSREF_ARTICLE_STATS</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created new category article stats for category.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting URL for category via URL map...&quot;</span><span class="p">)</span>
            <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;low&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url_maps&quot;</span><span class="p">][</span><span class="s2">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Base article data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting base article data...&quot;</span><span class="p">)</span>
            <span class="n">article_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">],</span>
                <span class="s2">&quot;faculty_members&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">],</span>
                <span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">],</span>
                <span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;abstract&quot;</span><span class="p">],</span>
                <span class="s2">&quot;license_url&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;license_url&quot;</span><span class="p">],</span>
                <span class="s2">&quot;date_published_print&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;date_published_print&quot;</span><span class="p">],</span>
                <span class="s2">&quot;date_published_online&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;date_published_online&quot;</span><span class="p">],</span>
                <span class="s2">&quot;journal&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;journal&quot;</span><span class="p">],</span>
                <span class="s2">&quot;download_url&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;download_url&quot;</span><span class="p">],</span>
                <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;themes&quot;</span><span class="p">],</span>
                <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span>
                <span class="s2">&quot;category_urls&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">),</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed setting base article data.&quot;</span><span class="p">)</span>

            <span class="c1"># Add category and URL to appropriate level</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Adding category and URL to appropriate level...&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in low level categories...&quot;</span><span class="p">)</span>
                <span class="n">article_data</span><span class="p">[</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category</span>
                <span class="n">article_data</span><span class="p">[</span><span class="s2">&quot;low_category_urls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
            <span class="k">elif</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in mid level categories...&quot;</span><span class="p">)</span>
                <span class="n">article_data</span><span class="p">[</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category</span>
                <span class="n">article_data</span><span class="p">[</span><span class="s2">&quot;mid_category_urls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in top level categories...&quot;</span><span class="p">)</span>
                <span class="n">article_data</span><span class="p">[</span><span class="s2">&quot;top_level_categories&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category</span>
                <span class="n">article_data</span><span class="p">[</span><span class="s2">&quot;top_category_urls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting params for category article stats...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">category_article_stats</span><span class="p">[</span><span class="n">category</span><span class="p">]</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span>
                <span class="p">{</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">]:</span> <span class="n">article_data</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed setting params for category article stats.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed updating category article stats.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor.create_article_object">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.create_article_object">[docs]</a>
    <span class="k">def</span> <span class="nf">create_article_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new article object with complete metadata.</span>

<span class="sd">        Creates a CrossrefArticleDetails object containing all article information,</span>
<span class="sd">        including category relationships, URLs, and metadata. Handles URL generation</span>
<span class="sd">        for different category levels and maintains category hierarchies.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Keyword arguments containing article data:</span>
<span class="sd">                - doi (str): Digital Object Identifier</span>
<span class="sd">                - title (str): Article title</span>
<span class="sd">                - tc_count (int): Citation count</span>
<span class="sd">                - faculty_members (List[str]): Faculty authors</span>
<span class="sd">                - faculty_affiliations (Dict[str, List[str]]): Faculty affiliations</span>
<span class="sd">                - abstract (str): Article abstract</span>
<span class="sd">                - license_url (str): License URL</span>
<span class="sd">                - date_published_print (str): Print publication date</span>
<span class="sd">                - date_published_online (str): Online publication date</span>
<span class="sd">                - journal (str): Journal name</span>
<span class="sd">                - download_url (str): Download URL</span>
<span class="sd">                - themes (List[str]): Article themes</span>
<span class="sd">                - all_categories (List[str]): All categories</span>
<span class="sd">                - top_level_categories (List[str]): Top-level categories</span>
<span class="sd">                - mid_level_categories (List[str]): Mid-level categories</span>
<span class="sd">                - low_level_categories (List[str]): Low-level categories</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If required kwargs are missing.</span>
<span class="sd">            ValueError: If article object cannot be created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating article object...&quot;</span><span class="p">)</span>

        <span class="c1"># Create the article</span>
        <span class="n">article</span><span class="p">:</span> <span class="n">CrossrefArticleDetails</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataclass_factory</span><span class="o">.</span><span class="n">get_dataclass</span><span class="p">(</span>
            <span class="n">DataClassTypes</span><span class="o">.</span><span class="n">CROSSREF_ARTICLE_DETAILS</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created article object.&quot;</span><span class="p">)</span>
        <span class="c1"># Generate URLs for all categories</span>
        <span class="c1"># Initialize empty lists for top, mid, low category URLs</span>
        <span class="c1"># We don&#39;t need lists for the categories themselves as they&#39;re already in **kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating URLs for all categories...&quot;</span><span class="p">)</span>
        <span class="n">top_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mid_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">low_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Parse through the categories and check if the level of the current category</span>
        <span class="c1"># This is to:</span>
        <span class="c1"># 1. Track top, mid, low category names</span>
        <span class="c1"># 2. Generate the URLs for each top, mid, low category</span>
        <span class="c1"># This allows for displaying what categories the articles what classified under</span>
        <span class="c1"># and under which level, as well as directly link to those pages on the frontend</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_categories&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing category: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in low level categories...&quot;</span><span class="p">)</span>
                <span class="c1"># Get the mid category for the low category</span>
                <span class="n">mid_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_mid_cat_for_low_cat</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got mid category for low category: </span><span class="si">{</span><span class="n">mid_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># Get the top category for the mid category</span>
                <span class="n">top_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_top_cat_for_mid_cat</span><span class="p">(</span><span class="n">mid_cat</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got top category for mid category: </span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># Generate the URL for the low category</span>
                <span class="c1"># If the low category is software development</span>
                <span class="c1"># and the mid category is software engineering</span>
                <span class="c1"># and the top category is computer science</span>
                <span class="c1"># the URL will be Computer%20science/software%20engineering/software%20development</span>
                <span class="n">low_cat_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mid_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in mid level categories...&quot;</span><span class="p">)</span>
                <span class="c1"># Get the top category for the mid category</span>
                <span class="n">top_cat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomy_util</span><span class="o">.</span><span class="n">get_top_cat_for_mid_cat</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got top category for mid category: </span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># Generate the URL for the mid category</span>
                <span class="c1"># If the mid category is software engineering</span>
                <span class="c1"># and the top category is computer science</span>
                <span class="c1"># the URL will be Computer%20science/software%20engineering</span>
                <span class="n">mid_cat_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">top_cat</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Category is in top level categories...&quot;</span><span class="p">)</span>
                <span class="c1"># If the top category is computer science</span>
                <span class="c1"># the URL will be Computer%20science</span>
                <span class="n">top_cat_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">))</span>

        <span class="c1"># Combine all the URLs to get a compendium of all the URLs</span>
        <span class="c1"># This doesn&#39;t have a defined use yet, but it seems like it has the potential</span>
        <span class="c1"># to be a valuable piece of data for something so tracking it now so I don&#39;t</span>
        <span class="c1"># have to add it later and rerun all the articles ran up to that point</span>
        <span class="c1"># in the event we end up wanting/needing it for something</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Combining all the URLs to get a compendium of all the URLs...&quot;</span>
        <span class="p">)</span>
        <span class="n">all_cat_urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_cat_urls</span> <span class="o">+</span> <span class="n">mid_cat_urls</span> <span class="o">+</span> <span class="n">low_cat_urls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Combined all the URLs: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">all_cat_urls</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Direct field updates for CrossrefArticleDetails</span>
        <span class="c1"># .set_params() is used to update the dataclass fields for this article object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting params for article object...&quot;</span><span class="p">)</span>
        <span class="n">article</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="c1"># Set _id to the doi to allow for easy lookup from the categories</span>
                <span class="c1"># As mentioned before each category has a list of dois</span>
                <span class="c1"># So through the use of that list we can look up in the DB each one of these article objects</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tc_count&quot;</span><span class="p">],</span>
                <span class="s2">&quot;faculty_members&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_members&quot;</span><span class="p">],</span>
                <span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">],</span>
                <span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;abstract&quot;</span><span class="p">],</span>
                <span class="s2">&quot;license_url&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;license_url&quot;</span><span class="p">],</span>
                <span class="s2">&quot;date_published_print&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;date_published_print&quot;</span><span class="p">],</span>
                <span class="s2">&quot;date_published_online&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;date_published_online&quot;</span><span class="p">],</span>
                <span class="s2">&quot;journal&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;journal&quot;</span><span class="p">],</span>
                <span class="s2">&quot;download_url&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;download_url&quot;</span><span class="p">],</span>
                <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span>
                <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;themes&quot;</span><span class="p">],</span>
                <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;all_categories&quot;</span><span class="p">],</span>
                <span class="s2">&quot;category_urls&quot;</span><span class="p">:</span> <span class="n">all_cat_urls</span><span class="p">,</span>
                <span class="c1"># Pull out and add lists for the category levels</span>
                <span class="s2">&quot;top_level_categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;top_level_categories&quot;</span><span class="p">],</span>
                <span class="s2">&quot;mid_level_categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;mid_level_categories&quot;</span><span class="p">],</span>
                <span class="s2">&quot;low_level_categories&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;low_level_categories&quot;</span><span class="p">],</span>
                <span class="c1"># Add in the URLs fetched and created at the top of this method</span>
                <span class="s2">&quot;top_category_urls&quot;</span><span class="p">:</span> <span class="n">top_cat_urls</span><span class="p">,</span>
                <span class="s2">&quot;mid_category_urls&quot;</span><span class="p">:</span> <span class="n">mid_cat_urls</span><span class="p">,</span>
                <span class="s2">&quot;low_category_urls&quot;</span><span class="p">:</span> <span class="n">low_cat_urls</span><span class="p">,</span>
                <span class="c1"># Actual page URL for this article is quote(doi)</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_url</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed setting params for article object.&quot;</span><span class="p">)</span>

        <span class="c1"># Append the created article object to the articles list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Appending the created article object to the articles list...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">articles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Completed appending the created article object to the articles list.&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="CategoryProcessor.clean_faculty_affiliations">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.clean_faculty_affiliations">[docs]</a>
    <span class="k">def</span> <span class="nf">clean_faculty_affiliations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">faculty_affiliations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean and format faculty affiliation data.</span>

<span class="sd">        Args:</span>
<span class="sd">            faculty_affiliations (Dict[str, Any]): Raw faculty affiliation mappings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: Cleaned faculty affiliation mappings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning and formatting faculty affiliation data...&quot;</span><span class="p">)</span>
        <span class="n">department_affiliations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">faculty_member</span><span class="p">,</span> <span class="n">affiliations</span> <span class="ow">in</span> <span class="n">faculty_affiliations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">department_affiliations</span><span class="p">[</span><span class="n">faculty_member</span><span class="p">]</span> <span class="o">=</span> <span class="n">affiliations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed cleaning and formatting faculty affiliation data.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">department_affiliations</span></div>


<div class="viewcode-block" id="CategoryProcessor.clean_faculty_members">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.clean_faculty_members">[docs]</a>
    <span class="k">def</span> <span class="nf">clean_faculty_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">faculty_members</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean and filter faculty member names.</span>

<span class="sd">        Args:</span>
<span class="sd">            faculty_members (List[str]): Raw list of faculty member names.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: Cleaned list of faculty member names, excluding empty strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning and filtering faculty member names...&quot;</span><span class="p">)</span>
        <span class="n">clean_faculty_members</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">faculty_member</span> <span class="ow">in</span> <span class="n">faculty_members</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">faculty_member</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">clean_faculty_members</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">faculty_member</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed cleaning and filtering faculty member names.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">clean_faculty_members</span></div>


<div class="viewcode-block" id="CategoryProcessor.initialize_categories">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.initialize_categories">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize_categories</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">categories</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize category data structures for all category levels.</span>

<span class="sd">        Creates CategoryInfo instances for each category and organizes them by level.</span>

<span class="sd">        Args:</span>
<span class="sd">            categories (Dict[str, List[str]]): Categories organized by level (top, mid, low).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, List[str]]: Organized category data including:</span>
<span class="sd">                - top_level_categories: List of top-level categories</span>
<span class="sd">                - mid_level_categories: List of mid-level categories</span>
<span class="sd">                - low_level_categories: List of low-level categories</span>
<span class="sd">                - all_categories: List of all categories</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If category initialization fails.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing categories...&quot;</span><span class="p">)</span>
        <span class="n">top_level_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mid_level_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">low_level_categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">category_level</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;mid&quot;</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Category being initialized is in level: </span><span class="si">{</span><span class="n">category_level</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">categories</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category_level</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Category being initialized: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Checking if category already exists in category data...&quot;</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">category</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_data</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;Category does not exist, creating new category info...&quot;</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">category_data</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataclass_factory</span><span class="o">.</span><span class="n">get_dataclass</span><span class="p">(</span>
                        <span class="n">DataClassTypes</span><span class="o">.</span><span class="n">CATEGORY_INFO</span><span class="p">,</span> <span class="n">category_name</span><span class="o">=</span><span class="n">category</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created new category info.&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">category_level</span> <span class="o">==</span> <span class="s2">&quot;top&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;Category is in top level categories, appending to top level categories list...&quot;</span>
                    <span class="p">)</span>
                    <span class="n">top_level_categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">category_level</span> <span class="o">==</span> <span class="s2">&quot;mid&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;Category is in mid level categories, appending to mid level categories list...&quot;</span>
                    <span class="p">)</span>
                    <span class="n">mid_level_categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">category_level</span> <span class="o">==</span> <span class="s2">&quot;low&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;Category is in low level categories, appending to low level categories list...&quot;</span>
                    <span class="p">)</span>
                    <span class="n">low_level_categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Completed initializing categories.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;top_level_categories&quot;</span><span class="p">:</span> <span class="n">top_level_categories</span><span class="p">,</span>
            <span class="s2">&quot;mid_level_categories&quot;</span><span class="p">:</span> <span class="n">mid_level_categories</span><span class="p">,</span>
            <span class="s2">&quot;low_level_categories&quot;</span><span class="p">:</span> <span class="n">low_level_categories</span><span class="p">,</span>
            <span class="s2">&quot;all_categories&quot;</span><span class="p">:</span> <span class="n">top_level_categories</span>
            <span class="o">+</span> <span class="n">mid_level_categories</span>
            <span class="o">+</span> <span class="n">low_level_categories</span><span class="p">,</span>
        <span class="p">}</span></div>


    <span class="c1"># Set of public Getter methods to access the data</span>
<div class="viewcode-block" id="CategoryProcessor.get_category_data">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.get_category_data">[docs]</a>
    <span class="k">def</span> <span class="nf">get_category_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CategoryInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the processed category data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, CategoryInfo]: Mapping of categories to their information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning category data...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_data</span></div>


<div class="viewcode-block" id="CategoryProcessor.get_category_article_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.get_category_article_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">get_category_article_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CrossrefArticleStats</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get article statistics organized by category.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, CrossrefArticleStats]: Mapping of categories to their article statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning article statistics organized by category...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_article_stats</span></div>


<div class="viewcode-block" id="CategoryProcessor.get_articles">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.get_articles">[docs]</a>
    <span class="k">def</span> <span class="nf">get_articles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">CrossrefArticleDetails</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of processed articles.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[CrossrefArticleDetails]: List of all processed article details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning list of processed articles...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">articles</span></div>


<div class="viewcode-block" id="CategoryProcessor.get_faculty_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.get_faculty_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">get_faculty_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FacultyStats</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get faculty statistics organized by category.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, FacultyStats]: Mapping of categories to their faculty statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning faculty statistics organized by category...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">faculty_stats</span></div>


<div class="viewcode-block" id="CategoryProcessor.get_global_faculty_stats">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor.get_global_faculty_stats">[docs]</a>
    <span class="k">def</span> <span class="nf">get_global_faculty_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GlobalFacultyStats</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get global statistics for all faculty members.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, GlobalFacultyStats]: Mapping of faculty members to their global statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning global statistics for all faculty members...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_faculty_stats</span></div>


    <span class="c1"># End of public Getter methods</span>

<div class="viewcode-block" id="CategoryProcessor._collect_all_affiliations">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor._collect_all_affiliations">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_collect_all_affiliations</span><span class="p">(</span>
        <span class="n">faculty_affiliations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collect all unique department affiliations.</span>

<span class="sd">        Args:</span>
<span class="sd">            faculty_affiliations (Dict[str, Any]): Faculty to department mappings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Set[str]: Set of unique department affiliations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Collecting all unique department affiliations...&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing all affiliations empty set...&quot;</span><span class="p">)</span>
        <span class="n">all_affiliations</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All affiliations empty set initialized.&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iterating through faculty affiliations...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">department_affiliation</span> <span class="ow">in</span> <span class="n">faculty_affiliations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing department affiliation: </span><span class="si">{</span><span class="n">department_affiliation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking if department affiliation is a set...&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">department_affiliation</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Department affiliation is a set, updating all affiliations set...&quot;</span>
                <span class="p">)</span>
                <span class="n">all_affiliations</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">department_affiliation</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">department_affiliation</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Department affiliation is a list, updating all affiliations set...&quot;</span>
                <span class="p">)</span>
                <span class="n">all_affiliations</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">department_affiliation</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">department_affiliation</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Department affiliation is a string, adding to all affiliations set...&quot;</span>
                <span class="p">)</span>
                <span class="n">all_affiliations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">department_affiliation</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Completed iterating through faculty affiliations, returning all affiliations set...&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">all_affiliations</span></div>


<div class="viewcode-block" id="CategoryProcessor._generate_url">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor._generate_url">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generate_url</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a URL-safe string.</span>

<span class="sd">        Args:</span>
<span class="sd">            string (str): Input string to encode.</span>
<span class="sd">            logger (logging.Logger | None): Logger instance to use for logging.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: URL-encoded string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating URL-encoded string for: </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">url_encoded_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">quote</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated URL-encoded string: </span><span class="si">{</span><span class="n">url_encoded_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url_encoded_string</span></div>


<div class="viewcode-block" id="CategoryProcessor._generate_normal_id">
<a class="viewcode-back" href="../../../category_processor.html#academic_metrics.core.category_processor.CategoryProcessor._generate_normal_id">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generate_normal_id</span><span class="p">(</span>
        <span class="n">strings</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a normalized ID from a list of strings.</span>

<span class="sd">        Args:</span>
<span class="sd">            strings (List[str]): List of strings to combine into an ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Normalized ID string (lowercase, hyphen-separated).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating normalized ID from strings: </span><span class="si">{</span><span class="n">strings</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing normalized ID as empty string...&quot;</span><span class="p">)</span>
        <span class="n">normal_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initialized normalized ID as empty string.&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iterating through strings to generate normalized ID...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing string: </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">normal_id</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">string</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">_&#39;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated normalized ID: </span><span class="si">{</span><span class="n">normal_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Completed iterating through strings, returning normalized ID...&quot;</span><span class="p">)</span>
        <span class="n">normalized_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">normal_id</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Normalized ID: </span><span class="si">{</span><span class="n">normalized_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">normalized_id</span></div>
</div>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.factories</span> <span class="kn">import</span> <span class="n">DataClassFactory</span><span class="p">,</span> <span class="n">StrategyFactory</span>
    <span class="kn">from</span> <span class="nn">academic_metrics.utils</span> <span class="kn">import</span> <span class="n">Taxonomy</span><span class="p">,</span> <span class="n">Utilities</span><span class="p">,</span> <span class="n">WarningManager</span>

    <span class="n">dc_factory</span> <span class="o">=</span> <span class="n">DataClassFactory</span><span class="p">()</span>
    <span class="n">taxonomy</span> <span class="o">=</span> <span class="n">Taxonomy</span><span class="p">()</span>
    <span class="n">strategy_factory</span> <span class="o">=</span> <span class="n">StrategyFactory</span><span class="p">()</span>
    <span class="n">warning_manager</span> <span class="o">=</span> <span class="n">WarningManager</span><span class="p">()</span>
    <span class="n">utilities</span> <span class="o">=</span> <span class="n">Utilities</span><span class="p">(</span>
        <span class="n">strategy_factory</span><span class="o">=</span><span class="n">strategy_factory</span><span class="p">,</span> <span class="n">warning_manager</span><span class="o">=</span><span class="n">warning_manager</span>
    <span class="p">)</span>

    <span class="n">category_processor</span> <span class="o">=</span> <span class="n">CategoryProcessor</span><span class="p">(</span>
        <span class="n">utils</span><span class="o">=</span><span class="n">utilities</span><span class="p">,</span>
        <span class="n">dataclass_factory</span><span class="o">=</span><span class="n">dc_factory</span><span class="p">,</span>
        <span class="n">warning_manager</span><span class="o">=</span><span class="n">warning_manager</span><span class="p">,</span>
        <span class="n">taxonomy_util</span><span class="o">=</span><span class="n">taxonomy</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">raw_attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Agricultural sciences and natural resources&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Geosciences, atmospheric, and ocean sciences&quot;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;mid&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Agricultural, animal, plant, and veterinary sciences&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Geological and earth sciences&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Ocean/ marine sciences and atmospheric science&quot;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Aquaculture&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Food science and technology&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Plant sciences&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Geology/ earth science, general&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Hydrology and water resources science&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Marine biology and biological oceanography&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Marine sciences&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">},</span>
        <span class="s2">&quot;faculty_members&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;Christopher Mulanda Aura&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Safina Musa&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Chrisphine S. Nyamweya&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Zachary Ogari&quot;</span><span class="p">,</span>
            <span class="s2">&quot;James M. Njiru&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Stuart E. Hamilton&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Linda May&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;faculty_affiliations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;Christopher Mulanda Aura&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Kenya Marine and Fisheries Research Institute Kisumu Kenya&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Safina Musa&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Kenya Marine and Fisheries Research Institute Kegati Kenya&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Chrisphine S. Nyamweya&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Kenya Marine and Fisheries Research Institute Kisumu Kenya&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Zachary Ogari&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Kenya Marine and Fisheries Research Institute Kisumu Kenya&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;James M. Njiru&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Kenya Marine and Fisheries Research Institute Mombasa Kenya&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Stuart E. Hamilton&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Salisbury University Salisbury USA&quot;</span><span class="p">],</span>
            <span class="s2">&quot;Linda May&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;UK Centre for Ecology &amp;amp; Hydrology Penicuik Midlothian UK&quot;</span>
            <span class="p">],</span>
        <span class="p">},</span>
        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;A GISbased approach for delineating suitable areas for cage fish culture in a lake&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;tc_count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="s2">&quot;We present a GISbased approach to the delineation of areas that have different levels of suitability for use as tilapia cage culture sites the Kenyan part of Lake Victoria, Africa. The study area was 4,100</span><span class="se">\xa0</span><span class="s2">km2. The method uses highresolution bathymetric data, newly collected water quality data from all major fishing grounds and cage culture sites, and existing spatial information from previous studies. The parameters considered are water depth, water temperature, levels of dissolved oxygen, chlorophyllaconcentrations, distances to the lake shoreline and proximity to other constraints on cage culture development. The results indicated that the area most suitable for fish cages comprised about 362</span><span class="se">\xa0</span><span class="s2">km2, or approximately 9</span><span class="si">% o</span><span class="s2">f the total area; the remaining 91% (i.e., 3,737</span><span class="se">\xa0</span><span class="s2">km2) was found to be unsuitable for tilapia cage culture. We conclude that the successful implementation of this approach would need stakeholder involvement in the validation and approval of potential sites, and in the incorporation of lake zoning into spatial planning policy and the regulations that support sustainable use while minimising resource use conflicts. The results of this study have broader applicability to the whole of Lake Victoria, other African Great Lakes, and any lakes in the world where tilapia cage culture already occurs or may occur in the future.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;license_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://onlinelibrary.wiley.com/termsAndConditions#vor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;date_published_print&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;date_published_online&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-4-13&quot;</span><span class="p">,</span>
        <span class="s2">&quot;journal&quot;</span><span class="p">:</span> <span class="s2">&quot;Lakes &amp;amp; Reservoirs: Science, Policy and Management for Sustainable Use&quot;</span><span class="p">,</span>
        <span class="s2">&quot;download_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://dx.doi.org/10.1111/lre.12357&quot;</span><span class="p">,</span>
        <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="s2">&quot;10.1111/lre.12357&quot;</span><span class="p">,</span>
        <span class="s2">&quot;themes&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;Aquaculture site suitability&quot;</span><span class="p">,</span>
            <span class="s2">&quot;GIS applications in environmental science&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Water quality assessment&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Sustainable resource management&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>

    <span class="n">category_processor</span><span class="o">.</span><span class="n">_test_category_processor</span><span class="p">(</span><span class="n">raw_attributes</span><span class="p">)</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
            </div>

            <div class="right">
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Spencer Presley, Cole Barbes.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>